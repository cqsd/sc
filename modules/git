#!/bin/bash

_git_short_help() {
    echo "Git conveniences"
}

_git() {
    echo "usage: $(basename $0) ${FUNCNAME[0]} subcommand"
    echo
    echo "available subcommands are:"
    echo "  remove-from-history - Fully remove a file from git history"
}

_git_remove-from-history() {
    if [ $# -lt 1 ]; then
        echo 'usage: remove-from-history path/to/file'
        exit 1
    fi
    __warn 'This is a destructive command, so you have to run it yourself:'
    echo
    cat <<EOF
git filter-branch --force --index-filter \\
    'git rm --cached --ignore-unmatch "$1"' \\
    --prune-empty --tag-name-filter cat -- --all
EOF
}
